spawn qemu-system-x86_64 -nographic --serial mon:stdio -hdc kernel/kernel.img
x


[] Welcome to K439
[init#0] starting
[init#0] waiting for A
[A#1] 0
[B#2] 0
[C#3] onKill: before running
[C#3] onExit
[D#4] 0
[EarlyExit#5] before exit
[EarlyExit#5] onExit
[EarlyDeath#6] before kill
[EarlyDeath#6] onKill: it was me
[EarlyDeath#6] onExit
[init#0] waiting for A
[A#1] 1
[B#2] 1
[D#4] 1
[init#0] waiting for A
[A#1] 2
[B#2] 2
[D#4] 2
[init#0] waiting for A
[A#1] onExit
[B#2] 3
[D#4] 3
[init#0] deleting A
[init#0] waiting for B
[B#2] 4
[D#4] 4
[init#0] waiting for B
[B#2] onExit
[D#4] 5
[init#0] deleting B
[init#0] deleting C
[init#0] waiting for D
[D#4] onKill: after running
[D#4] onExit
[init#0] deleting D
[Wait#7] 0 : about to call down
[Wait#7] 0 : back from calling down
[Wait#7] 1 : about to call down
[Wait#7] 1 : back from calling down
[Wait#7] 2 : about to call down
[init#0] about to call up
[Wait#7] 2 : back from calling down
[Wait#7] 3 : about to call down
[init#0] about to call up again
[init#0] waiting for Wait
[Wait#7] onKill: go away
[Wait#7] onExit
[init#0] deleting Wait
[init#0] waiting for producer
[producer#8] calling bb->put 0
[producer#8] back from bb->put
[producer#8] calling bb->put 1
[producer#8] back from bb->put
[producer#8] calling bb->put 2
[producer#8] back from bb->put
[producer#8] calling bb->put 3
[consumer#9] calling bb->get()
[consumer#9] back from bb->get() 0
[consumer#9] calling bb->get()
[consumer#9] back from bb->get() 1
[consumer#9] calling bb->get()
[consumer#9] back from bb->get() 2
[consumer#9] calling bb->get()
[init#0] waiting for producer
[producer#8] back from bb->put
[producer#8] calling bb->put 4
[producer#8] back from bb->put
[producer#8] calling bb->put 5
[producer#8] back from bb->put
[producer#8] calling bb->put 6
[init#0] waiting for producer
[consumer#9] back from bb->get() 3
[consumer#9] calling bb->get()
[consumer#9] back from bb->get() 4
[consumer#9] calling bb->get()
[consumer#9] back from bb->get() 5
[consumer#9] calling bb->get()
[init#0] waiting for producer
[producer#8] back from bb->put
[producer#8] calling bb->put 7
[producer#8] back from bb->put
[producer#8] calling bb->put 8
[producer#8] back from bb->put
[producer#8] calling bb->put 9
[init#0] waiting for producer
[consumer#9] back from bb->get() 6
[consumer#9] calling bb->get()
[consumer#9] back from bb->get() 7
[consumer#9] calling bb->get()
[consumer#9] back from bb->get() 8
[consumer#9] calling bb->get()
[init#0] waiting for producer
[producer#8] back from bb->put
[producer#8] calling bb->put -1
[producer#8] back from bb->put
[producer#8] onExit
[init#0] deleting producer
[init#0] waiting for consumer
[consumer#9] back from bb->get() 9
[consumer#9] calling bb->get()
[consumer#9] back from bb->get() -1
[consumer#9] onExit
[init#0] deleting consumer
[init#0] done
[init#0] onExit
nothing to do
*** System Shutdown ***
